

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>igraph.drawing.utils &mdash; Igraph 1.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Igraph
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">igraph</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Igraph</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>igraph.drawing.utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for igraph.drawing.utils</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Utility classes for drawing routines.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">hypot</span><span class="p">,</span> <span class="n">sin</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NamedTuple</span>

<span class="kn">from</span> <span class="nn">igraph.utils</span> <span class="kn">import</span> <span class="n">consecutive_pairs</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;BoundingBox&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;calculate_corner_radii&quot;</span><span class="p">,</span>
    <span class="s2">&quot;euclidean_distance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;evaluate_cubic_bezier&quot;</span><span class="p">,</span>
    <span class="s2">&quot;get_bezier_control_points_for_curved_edge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;intersect_bezier_curve_and_circle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;str_to_orientation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;autocurve&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1">#####################################################################</span>


<div class="viewcode-block" id="Rectangle"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle">[docs]</a><span class="k">class</span> <span class="nc">Rectangle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class representing a rectangle.&quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_left&quot;</span><span class="p">,</span> <span class="s2">&quot;_top&quot;</span><span class="p">,</span> <span class="s2">&quot;_right&quot;</span><span class="p">,</span> <span class="s2">&quot;_bottom&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a rectangle.</span>

<span class="sd">        The corners of the rectangle can be specified by either a tuple</span>
<span class="sd">        (four items, two for each corner, respectively), four separate numbers</span>
<span class="sd">        (X and Y coordinates for each corner) or two separate numbers (width</span>
<span class="sd">        and height, the upper left corner is assumed to be at (0,0))&quot;&quot;&quot;</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Rectangle</span><span class="p">):</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid coordinate format&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid coordinate format, numbers expected&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The coordinates of the corners.</span>

<span class="sd">        The coordinates are returned as a 4-tuple in the following order:</span>
<span class="sd">        left edge, top edge, right edge, bottom edge.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span>

    <span class="nd">@coords</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the coordinates of the corners.</span>

<span class="sd">        @param coords: a 4-tuple with the coordinates of the corners</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="n">coords</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The width of the rectangle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>

    <span class="nd">@width</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the width of the rectangle by adjusting the right edge.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The height of the rectangle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span>

    <span class="nd">@height</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the height of the rectangle by adjusting the bottom edge.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The X coordinate of the left side of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>

    <span class="nd">@left</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the X coordinate of the left side of the box&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The X coordinate of the right side of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span>

    <span class="nd">@right</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the X coordinate of the right side of the box&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Y coordinate of the top edge of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span>

    <span class="nd">@top</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">top</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the Y coordinate of the top edge of the box&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Y coordinate of the bottom edge of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span>

    <span class="nd">@bottom</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the Y coordinate of the bottom edge of the box&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">midx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The X coordinate of the center of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>

    <span class="nd">@midx</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">midx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves the center of the box to the given X coordinate&quot;&quot;&quot;</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">+=</span> <span class="n">dx</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">midy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Y coordinate of the center of the box&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>

    <span class="nd">@midy</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">midy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves the center of the box to the given Y coordinate&quot;&quot;&quot;</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+=</span> <span class="n">dy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">+=</span> <span class="n">dy</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The shape of the rectangle (width, height)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span>

    <span class="nd">@shape</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the shape of the rectangle (width, height).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">shape</span>

<div class="viewcode-block" id="Rectangle.contract"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.contract">[docs]</a>    <span class="k">def</span> <span class="nf">contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">margins</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Contracts the rectangle by the given margins.</span>

<span class="sd">        @return: a new L{Rectangle} object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">margins</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">margins</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">4</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margins must be a 4-tuple or a single number&quot;</span><span class="p">)</span>
        <span class="n">nx1</span><span class="p">,</span> <span class="n">ny1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+</span> <span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+</span> <span class="n">margins</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nx2</span><span class="p">,</span> <span class="n">ny2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">-</span> <span class="n">margins</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">-</span> <span class="n">margins</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">nx1</span> <span class="o">&gt;</span> <span class="n">nx2</span><span class="p">:</span>
            <span class="n">nx1</span> <span class="o">=</span> <span class="p">(</span><span class="n">nx1</span> <span class="o">+</span> <span class="n">nx2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">nx2</span> <span class="o">=</span> <span class="n">nx1</span>
        <span class="k">if</span> <span class="n">ny1</span> <span class="o">&gt;</span> <span class="n">ny2</span><span class="p">:</span>
            <span class="n">ny1</span> <span class="o">=</span> <span class="p">(</span><span class="n">ny1</span> <span class="o">+</span> <span class="n">ny2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">ny2</span> <span class="o">=</span> <span class="n">ny1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">nx1</span><span class="p">,</span> <span class="n">ny1</span><span class="p">,</span> <span class="n">nx2</span><span class="p">,</span> <span class="n">ny2</span><span class="p">)</span></div>

<div class="viewcode-block" id="Rectangle.expand"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.expand">[docs]</a>    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">margins</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expands the rectangle by the given margins.</span>

<span class="sd">        @return: a new L{Rectangle} object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">margins</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contract</span><span class="p">([</span><span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">margin</span><span class="p">)</span> <span class="k">for</span> <span class="n">margin</span> <span class="ow">in</span> <span class="n">margins</span><span class="p">])</span></div>

<div class="viewcode-block" id="Rectangle.isdisjoint"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.isdisjoint">[docs]</a>    <span class="k">def</span> <span class="nf">isdisjoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns C{True} if the two rectangles have no intersection.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; r1 = Rectangle(10, 10, 30, 30)</span>
<span class="sd">            &gt;&gt;&gt; r2 = Rectangle(20, 20, 50, 50)</span>
<span class="sd">            &gt;&gt;&gt; r3 = Rectangle(70, 70, 90, 90)</span>
<span class="sd">            &gt;&gt;&gt; r1.isdisjoint(r2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; r2.isdisjoint(r1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; r1.isdisjoint(r3)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; r3.isdisjoint(r1)</span>
<span class="sd">            True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Rectangle.isempty"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.isempty">[docs]</a>    <span class="k">def</span> <span class="nf">isempty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns C{True} if the rectangle is empty (i.e. it has zero</span>
<span class="sd">        width and height).</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; r1 = Rectangle(10, 10, 30, 30)</span>
<span class="sd">            &gt;&gt;&gt; r2 = Rectangle(70, 70, 90, 90)</span>
<span class="sd">            &gt;&gt;&gt; r1.isempty()</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; r2.isempty()</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; r1.intersection(r2).isempty()</span>
<span class="sd">            True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span></div>

<div class="viewcode-block" id="Rectangle.intersection"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.intersection">[docs]</a>    <span class="k">def</span> <span class="nf">intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the intersection of this rectangle with another.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; r1 = Rectangle(10, 10, 30, 30)</span>
<span class="sd">            &gt;&gt;&gt; r2 = Rectangle(20, 20, 50, 50)</span>
<span class="sd">            &gt;&gt;&gt; r3 = Rectangle(70, 70, 90, 90)</span>
<span class="sd">            &gt;&gt;&gt; r1.intersection(r2)</span>
<span class="sd">            Rectangle(20.0, 20.0, 30.0, 30.0)</span>
<span class="sd">            &gt;&gt;&gt; r2 &amp; r1</span>
<span class="sd">            Rectangle(20.0, 20.0, 30.0, 30.0)</span>
<span class="sd">            &gt;&gt;&gt; r2.intersection(r1) == r1.intersection(r2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; r1.intersection(r3)</span>
<span class="sd">            Rectangle(0.0, 0.0, 0.0, 0.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Rectangle</span><span class="p">(</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span><span class="p">),</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span><span class="p">),</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span><span class="p">),</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span><span class="p">),</span>
        <span class="p">)</span></div>

    <span class="fm">__and__</span> <span class="o">=</span> <span class="n">intersection</span>

<div class="viewcode-block" id="Rectangle.translate"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.translate">[docs]</a>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Translates the rectangle in-place.</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; r = Rectangle(10, 20, 50, 70)</span>
<span class="sd">            &gt;&gt;&gt; r.translate(30, -10)</span>
<span class="sd">            &gt;&gt;&gt; r</span>
<span class="sd">            Rectangle(40.0, 10.0, 80.0, 60.0)</span>

<span class="sd">        @param dx: the X coordinate of the translation vector</span>
<span class="sd">        @param dy: the Y coordinate of the translation vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">+=</span> <span class="n">dy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">+=</span> <span class="n">dy</span></div>

<div class="viewcode-block" id="Rectangle.union"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Rectangle.union">[docs]</a>    <span class="k">def</span> <span class="nf">union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the union of this rectangle with another.</span>

<span class="sd">        The resulting rectangle is the smallest rectangle that contains both</span>
<span class="sd">        rectangles.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; r1 = Rectangle(10, 10, 30, 30)</span>
<span class="sd">            &gt;&gt;&gt; r2 = Rectangle(20, 20, 50, 50)</span>
<span class="sd">            &gt;&gt;&gt; r3 = Rectangle(70, 70, 90, 90)</span>
<span class="sd">            &gt;&gt;&gt; r1.union(r2)</span>
<span class="sd">            Rectangle(10.0, 10.0, 50.0, 50.0)</span>
<span class="sd">            &gt;&gt;&gt; r2 | r1</span>
<span class="sd">            Rectangle(10.0, 10.0, 50.0, 50.0)</span>
<span class="sd">            &gt;&gt;&gt; r2.union(r1) == r1.union(r2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; r1.union(r3)</span>
<span class="sd">            Rectangle(10.0, 10.0, 90.0, 90.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Rectangle</span><span class="p">(</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span><span class="p">),</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span><span class="p">),</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span><span class="p">),</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span><span class="p">),</span>
        <span class="p">)</span></div>

    <span class="fm">__or__</span> <span class="o">=</span> <span class="n">union</span>

    <span class="k">def</span> <span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expands this rectangle to include itself and another completely while</span>
<span class="sd">        still being as small as possible.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; r1 = Rectangle(10, 10, 30, 30)</span>
<span class="sd">            &gt;&gt;&gt; r2 = Rectangle(20, 20, 50, 50)</span>
<span class="sd">            &gt;&gt;&gt; r3 = Rectangle(70, 70, 90, 90)</span>
<span class="sd">            &gt;&gt;&gt; r1 |= r2</span>
<span class="sd">            &gt;&gt;&gt; r1</span>
<span class="sd">            Rectangle(10.0, 10.0, 50.0, 50.0)</span>
<span class="sd">            &gt;&gt;&gt; r1 |= r3</span>
<span class="sd">            &gt;&gt;&gt; r1</span>
<span class="sd">            Rectangle(10.0, 10.0, 90.0, 90.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">coords</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">coords</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span></div>


<span class="c1">#####################################################################</span>


<div class="viewcode-block" id="BoundingBox"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.BoundingBox">[docs]</a><span class="k">class</span> <span class="nc">BoundingBox</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class representing a bounding box (a rectangular area) that</span>
<span class="sd">    encloses some objects.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replaces this bounding box with the union of itself and</span>
<span class="sd">        another.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; box1 = BoundingBox(10, 20, 50, 60)</span>
<span class="sd">            &gt;&gt;&gt; box2 = BoundingBox(70, 40, 100, 90)</span>
<span class="sd">            &gt;&gt;&gt; box1 |= box2</span>
<span class="sd">            &gt;&gt;&gt; print(box1)</span>
<span class="sd">            BoundingBox(10.0, 20.0, 100.0, 90.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Takes the union of this bounding box with another.</span>

<span class="sd">        The result is a bounding box which encloses both bounding</span>
<span class="sd">        boxes.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; box1 = BoundingBox(10, 20, 50, 60)</span>
<span class="sd">            &gt;&gt;&gt; box2 = BoundingBox(70, 40, 100, 90)</span>
<span class="sd">            &gt;&gt;&gt; box1 | box2</span>
<span class="sd">            BoundingBox(10.0, 20.0, 100.0, 90.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_left</span><span class="p">),</span>
            <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_top</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_top</span><span class="p">),</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_right</span><span class="p">),</span>
            <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bottom</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_bottom</span><span class="p">),</span>
        <span class="p">)</span></div>


<span class="c1">#####################################################################</span>


<span class="k">class</span> <span class="nc">FakeModule</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Fake module that raises an exception for everything&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        @param message: message to print in exceptions raised from this module</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message</span> <span class="o">=</span> <span class="n">message</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;_message&quot;</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message</span><span class="p">)</span>


<span class="c1">#####################################################################</span>


<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">(</span><span class="s2">&quot;_Point&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)])):</span>
    <span class="sd">&quot;&quot;&quot;Class representing a point on the 2D plane.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds the coordinates of a point to another one&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Subtracts the coordinates of a point to another one&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Multiplies the coordinates by a scalar&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">scalar</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">scalar</span><span class="p">)</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Divides the coordinates by a scalar&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">scalar</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">scalar</span><span class="p">)</span>

<div class="viewcode-block" id="Point.as_polar"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.as_polar">[docs]</a>    <span class="k">def</span> <span class="nf">as_polar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the polar coordinate representation of the point.</span>

<span class="sd">        @return: the radius and the angle in a tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.distance"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.distance">[docs]</a>    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the distance of the point from another one.</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; p1 = Point(5, 7)</span>
<span class="sd">            &gt;&gt;&gt; p2 = Point(8, 3)</span>
<span class="sd">            &gt;&gt;&gt; p1.distance(p2)</span>
<span class="sd">            5.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span></div>

<div class="viewcode-block" id="Point.interpolate"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.interpolate">[docs]</a>    <span class="k">def</span> <span class="nf">interpolate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">ratio</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Linearly interpolates between the coordinates of this point and</span>
<span class="sd">        another one.</span>

<span class="sd">        @param  other:  the other point</span>
<span class="sd">        @param  ratio:  the interpolation ratio between 0 and 1. Zero will</span>
<span class="sd">          return this point, 1 will return the other point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">ratio</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">ratio</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Point.length"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the vector pointing from the origin to this</span>
<span class="sd">        point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span></div>

<div class="viewcode-block" id="Point.normalized"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.normalized">[docs]</a>    <span class="k">def</span> <span class="nf">normalized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Normalizes the coordinates of the point s.t. its length will be 1</span>
<span class="sd">        after normalization. Returns the normalized point.&quot;&quot;&quot;</span>
        <span class="nb">len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="nb">len</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="nb">len</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.sq_length"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.sq_length">[docs]</a>    <span class="k">def</span> <span class="nf">sq_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the squared length of the vector pointing from the origin</span>
<span class="sd">        to this point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">**</span> <span class="mi">2</span></div>

<div class="viewcode-block" id="Point.towards"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.towards">[docs]</a>    <span class="k">def</span> <span class="nf">towards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the point that is at a given distance from this point</span>
<span class="sd">        towards another one.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">distance</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">angle</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Point.FromPolar"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.Point.FromPolar">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">FromPolar</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a point from polar coordinates.</span>

<span class="sd">        C{radius} is the distance of the point from the origin; C{angle} is the</span>
<span class="sd">        angle between the X axis and the vector pointing to the point from</span>
<span class="sd">        the origin.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="calculate_corner_radii"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.calculate_corner_radii">[docs]</a><span class="k">def</span> <span class="nf">calculate_corner_radii</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">corner_radius</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a list of points and a desired corner radius, returns a list</span>
<span class="sd">    containing proposed corner radii for each of the points such that it is</span>
<span class="sd">    ensured that the corner radius at a point is never larger than half of</span>
<span class="sd">    the minimum distance between the point and its neighbors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="o">*</span><span class="n">point</span><span class="p">)</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
    <span class="n">side_vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="o">-</span> <span class="n">u</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">consecutive_pairs</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">circular</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
    <span class="n">half_side_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">side</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="n">side_vecs</span><span class="p">]</span>
    <span class="n">corner_radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">corner_radius</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">corner_radii</span><span class="p">)):</span>
        <span class="n">prev_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">idx</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">corner_radius</span><span class="p">,</span> <span class="n">half_side_lengths</span><span class="p">[</span><span class="n">prev_idx</span><span class="p">],</span> <span class="n">half_side_lengths</span><span class="p">[</span><span class="n">idx</span><span class="p">]]</span>
        <span class="n">corner_radii</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">radii</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">corner_radii</span></div>


<div class="viewcode-block" id="euclidean_distance"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.euclidean_distance">[docs]</a><span class="k">def</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Computes the Euclidean distance between points (x1,y1) and (x2,y2).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">hypot</span><span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span></div>


<div class="viewcode-block" id="evaluate_cubic_bezier"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.evaluate_cubic_bezier">[docs]</a><span class="k">def</span> <span class="nf">evaluate_cubic_bezier</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Evaluates the Bezier curve from point (x0,y0) to (x3,y3)</span>
<span class="sd">    via control points (x1,y1) and (x2,y2) at t. t is typically in the range</span>
<span class="sd">    [0; 1] such that 0 returns (x0, y0) and 1 returns (x3, y3).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xt</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x0</span>
        <span class="o">+</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x1</span>
        <span class="o">+</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">x2</span>
        <span class="o">+</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x3</span>
    <span class="p">)</span>
    <span class="n">yt</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">y0</span>
        <span class="o">+</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">y1</span>
        <span class="o">+</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">y2</span>
        <span class="o">+</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">y3</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">xt</span><span class="p">,</span> <span class="n">yt</span></div>


<div class="viewcode-block" id="get_bezier_control_points_for_curved_edge"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.get_bezier_control_points_for_curved_edge">[docs]</a><span class="k">def</span> <span class="nf">get_bezier_control_points_for_curved_edge</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">curvature</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper function that calculates the Bezier control points for a</span>
<span class="sd">    curved edge that goes from (x1, y1) to (x2, y2).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">aux1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">-</span> <span class="n">curvature</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span>
        <span class="mi">2</span> <span class="o">*</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">y2</span>
    <span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">+</span> <span class="n">curvature</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
   
    <span class="n">aux2</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">-</span> <span class="n">curvature</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">),</span> <span class="p">(</span>
        <span class="n">y1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">y2</span>
    <span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">+</span> <span class="n">curvature</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
   
    <span class="k">return</span> <span class="n">aux1</span><span class="p">,</span> <span class="n">aux2</span></div>


<div class="viewcode-block" id="intersect_bezier_curve_and_circle"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.intersect_bezier_curve_and_circle">[docs]</a><span class="k">def</span> <span class="nf">intersect_bezier_curve_and_circle</span><span class="p">(</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">10</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Binary search solver for finding the intersection of a Bezier curve</span>
<span class="sd">    and a circle centered at the curve&#39;s end point.</span>

<span class="sd">    Returns the x, y coordinates of the intersection point.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The exact formulation of the problem is a quartic equation and it is</span>
    <span class="c1"># probably not worth coding up an exact quartic solver. The solution below</span>
    <span class="c1"># uses binary search. Another solution would be simply to intersect the</span>
    <span class="c1"># circle with the line pointing from (x2, y2) to (x3, y3) as the difference</span>
    <span class="c1"># is likely to be negligible.</span>

    <span class="n">precision</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">/</span> <span class="mf">20.0</span>
    <span class="n">source_target_distance</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">)</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">radius</span> <span class="o">/</span> <span class="n">source_target_distance</span>

    <span class="n">xt1</span><span class="p">,</span> <span class="n">yt1</span> <span class="o">=</span> <span class="n">evaluate_cubic_bezier</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span>

    <span class="n">distance_t0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">distance_t1</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">xt1</span><span class="p">,</span> <span class="n">yt1</span><span class="p">)</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_t1</span> <span class="o">-</span> <span class="n">radius</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">precision</span> <span class="ow">and</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="n">max_iter</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">distance_t1</span> <span class="o">-</span> <span class="n">radius</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="p">((</span><span class="n">distance_t0</span> <span class="o">-</span> <span class="n">radius</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">t_new</span> <span class="o">=</span> <span class="p">(</span><span class="n">t0</span> <span class="o">+</span> <span class="n">t1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_t1</span> <span class="o">-</span> <span class="n">radius</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_t0</span> <span class="o">-</span> <span class="n">radius</span><span class="p">):</span>
                <span class="c1"># If t1 gets us closer to the circumference step in the</span>
                <span class="c1"># same direction</span>
                <span class="n">t_new</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">t_new</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span>
        <span class="n">t_new</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">t_new</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span> <span class="k">if</span> <span class="n">t_new</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">t_new</span><span class="p">)</span>
        <span class="n">t0</span><span class="p">,</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t_new</span>
        <span class="n">distance_t0</span> <span class="o">=</span> <span class="n">distance_t1</span>
        <span class="n">xt1</span><span class="p">,</span> <span class="n">yt1</span> <span class="o">=</span> <span class="n">evaluate_cubic_bezier</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span>
        <span class="n">distance_t1</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">xt1</span><span class="p">,</span> <span class="n">yt1</span><span class="p">)</span>
        <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">evaluate_cubic_bezier</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span></div>


<div class="viewcode-block" id="str_to_orientation"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.str_to_orientation">[docs]</a><span class="k">def</span> <span class="nf">str_to_orientation</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">reversed_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reversed_vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tries to interpret a string as an orientation value.</span>

<span class="sd">    The following basic values are understood: ``left-right``, ``bottom-top``,</span>
<span class="sd">    ``right-left``, ``top-bottom``. Possible aliases are:</span>

<span class="sd">      - ``horizontal``, ``horiz``, ``h`` and ``lr`` for ``left-right``</span>

<span class="sd">      - ``vertical``, ``vert``, ``v`` and ``tb`` for top-bottom.</span>

<span class="sd">      - ``lr`` for ``left-right``.</span>

<span class="sd">      - ``rl`` for ``right-left``.</span>

<span class="sd">    ``reversed_horizontal`` reverses the meaning of ``horizontal``, ``horiz``</span>
<span class="sd">    and ``h`` to ``rl`` (instead of ``lr``); similarly, ``reversed_vertical``</span>
<span class="sd">    reverses the meaning of ``vertical``, ``vert`` and ``v`` to ``bt``</span>
<span class="sd">    (instead of ``tb``).</span>

<span class="sd">    Returns one of ``lr``, ``rl``, ``tb`` or ``bt``, or throws ``ValueError``</span>
<span class="sd">    if the string cannot be interpreted as an orientation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">aliases</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;left-right&quot;</span><span class="p">:</span> <span class="s2">&quot;lr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;right-left&quot;</span><span class="p">:</span> <span class="s2">&quot;rl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-bottom&quot;</span><span class="p">:</span> <span class="s2">&quot;tb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-top&quot;</span><span class="p">:</span> <span class="s2">&quot;bt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-down&quot;</span><span class="p">:</span> <span class="s2">&quot;tb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-up&quot;</span><span class="p">:</span> <span class="s2">&quot;bt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;top-bottom&quot;</span><span class="p">:</span> <span class="s2">&quot;tb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bottom-top&quot;</span><span class="p">:</span> <span class="s2">&quot;bt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;td&quot;</span><span class="p">:</span> <span class="s2">&quot;tb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bu&quot;</span><span class="p">:</span> <span class="s2">&quot;bt&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="nb">dir</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lr&quot;</span><span class="p">,</span> <span class="s2">&quot;rl&quot;</span><span class="p">][</span><span class="n">reversed_horizontal</span><span class="p">]</span>
    <span class="n">aliases</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">horizontal</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span> <span class="n">horiz</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="nb">dir</span><span class="p">)</span>

    <span class="nb">dir</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tb&quot;</span><span class="p">,</span> <span class="s2">&quot;bt&quot;</span><span class="p">][</span><span class="n">reversed_vertical</span><span class="p">]</span>
    <span class="n">aliases</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">vertical</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span> <span class="n">vert</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="nb">dir</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;lr&quot;</span><span class="p">,</span> <span class="s2">&quot;rl&quot;</span><span class="p">,</span> <span class="s2">&quot;tb&quot;</span><span class="p">,</span> <span class="s2">&quot;bt&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unknown orientation: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="autocurve"><a class="viewcode-back" href="../../../igraph.drawing.html#igraph.drawing.utils.autocurve">[docs]</a><span class="k">def</span> <span class="nf">autocurve</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;curved&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculates curvature values for each of the edges in the graph to make</span>
<span class="sd">    sure that multiple edges are shown properly on a graph plot.</span>

<span class="sd">    This function checks the multiplicity of each edge in the graph and</span>
<span class="sd">    assigns curvature values (numbers between -1 and 1, corresponding to</span>
<span class="sd">    CCW (-1), straight (0) and CW (1) curved edges) to them. The assigned</span>
<span class="sd">    values are either stored in an edge attribute or returned as a list,</span>
<span class="sd">    depending on the value of the I{attribute} argument.</span>

<span class="sd">    @param graph: the graph on which the calculation will be run</span>
<span class="sd">    @param attribute: the name of the edge attribute to save the curvature</span>
<span class="sd">      values to. The default value is C{curved}, which is the name of the</span>
<span class="sd">      edge attribute the default graph plotter checks to decide whether an</span>
<span class="sd">      edge should be curved on the plot or not. If I{attribute} is C{None},</span>
<span class="sd">      the result will not be stored.</span>
<span class="sd">    @param default: the default curvature for single edges. Zero means that</span>
<span class="sd">      single edges will be straight. If you want single edges to be curved</span>
<span class="sd">      as well, try passing 0.5 or -0.5 here.</span>
<span class="sd">    @return: the list of curvature values if I{attribute} is C{None},</span>
<span class="sd">      otherwise C{None}.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># The following loop could be re-written in C if it turns out to be a</span>
    <span class="c1"># bottleneck. Unfortunately we cannot use Graph.count_multiple() here</span>
    <span class="c1"># because we have to ignore edge directions.</span>
    <span class="n">multiplicities</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">es</span><span class="p">:</span>
        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="n">tuple</span>
        <span class="k">if</span> <span class="n">u</span> <span class="o">&gt;</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">multiplicities</span><span class="p">[</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">multiplicities</span><span class="p">[</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">default</span><span class="p">]</span> <span class="o">*</span> <span class="n">graph</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">eids</span> <span class="ow">in</span> <span class="n">multiplicities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="c1"># Is it a single edge?</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># Odd number of edges; the last will be straight</span>
            <span class="n">result</span><span class="p">[</span><span class="n">eids</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Arrange the remaining edges</span>
        <span class="n">curve</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">dcurve</span><span class="p">,</span> <span class="n">sign</span> <span class="o">=</span> <span class="n">curve</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">edge</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">source</span> <span class="o">&gt;</span> <span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">sign</span> <span class="o">*</span> <span class="n">curve</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span> <span class="o">=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">curve</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">+=</span> <span class="n">dcurve</span>
            <span class="n">sign</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">if</span> <span class="n">attribute</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">graph</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Anurag.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>